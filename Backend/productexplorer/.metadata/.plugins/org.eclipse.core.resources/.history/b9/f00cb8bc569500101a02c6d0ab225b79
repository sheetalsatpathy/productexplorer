package com.org.productexplorer.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.org.productexplorer.dao.NavigationDao;
import com.org.productexplorer.entity.Category;
import com.org.productexplorer.entity.Navigation;

@Service
public class Navigationservice {
 
	@Autowired
    private NavigationDao navigationDao; 

	 public Navigation create(Navigation nav) {
	        if (nav.getCategories() != null) {
	            for (Category category : nav.getCategories()) {
	                category.setNavigation(nav);
	            }
	        }
	        return navigationDao.save(nav);
	    }

	    public List<Navigation> getAll() {
	        List<Navigation> list = navigationDao.findAll();
	        for (Navigation nav : list) {
	            if (nav.getCategories() != null) {
	                for (Category cat : nav.getCategories()) {
	                    cat.setNavigation(null); 
	                }
	            }
	        }
	        return list;
	    }

	    public Navigation getById(Long id) {
	        Navigation nav = navigationDao.findById(id).orElse(null);
	        if (nav != null && nav.getCategories() != null) {
	            for (Category cat : nav.getCategories()) {
	                cat.setNavigation(null); 
	            }
	        }
	        return nav;
	    }
}
